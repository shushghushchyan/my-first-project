const productData = [
    {
        id: 1,
        title: "I'm a product",
        price: 16.00,
        quantity: 1 ,
        info:"Lorem ipsum dolor sit amet.Lorem ipsum dolor sit amet.",
        descript:"Lorem ipsum dolor sit amet.",
        sku:"0001",
        tag: ["men"],
        url:"https://static.wixstatic.com/media/c837a6_944cb31b5c7d4659b7a0c6612b4df573~mv2.jpg/v1/fill/w_520,h_593,al_c,q_80,usm_0.66_1.00_0.01,enc_auto/c837a6_944cb31b5c7d4659b7a0c6612b4df573~mv2.jpg",
        
    }
    ,
    {
        id: 2,
        title: "I'm a product",
        price: 19.00,
        quantity: 1 ,
        info:"Lorem ipsum dolor sit amet.Lorem ipsum dolor sit amet.",
        descript:"Lorem ipsum dolor sit amet.",
        sku:"0002",
        tag: ["home", "women"],
        url: "https://static.wixstatic.com/media/c837a6_944cb31b5c7d4659b7a0c6612b4df573~mv2.jpg/v1/fill/w_520,h_593,al_c,q_80,usm_0.66_1.00_0.01,enc_auto/c837a6_944cb31b5c7d4659b7a0c6612b4df573~mv2.jpg",
        
    },
    {
        id: 3,
        title: "I'm a product",
        price: 20.00,
        quantity: 1 ,
        info:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Voluptates, ullam..",
        descript:"Lorem ipsum dolor sit amet.",
        sku:"0003",
        tag:["home","men"],
        url: "https://static.wixstatic.com/media/c837a6_fd300737ecf3406b83fd9be5d67463e4~mv2.jpg/v1/fill/w_520,h_593,al_c,q_80,usm_0.66_1.00_0.01,enc_auto/c837a6_944cb31b5c7d4659b7a0c6612b4df573~mv2.jpg",
        
    },
    {
        id: 4,
        title: "I'm a product",
        price: 30.00,
        quantity: 1 ,
         info:"Lorem ipsum dolor sit amet.Lorem ipsum dolor sit amet.",
        descript:"Lorem ipsum dolor sit amet.",
        sku:"0004",
        tag: ["home","men"],
        url: "https://static.wixstatic.com/media/c837a6_6a83893e75e048b3a61c7a8711b93da3~mv2.jpg/v1/fill/w_520,h_593,al_c,q_80,usm_0.66_1.00_0.01,enc_auto/c837a6_944cb31b5c7d4659b7a0c6612b4df573~mv2.jpg",
        
    },
    {
        id: 5,
        title: "I'm a product",
        price: 23.00,
        quantity: 1 ,
        info:"Lorem ipsum dolor sit amet.Lorem ipsum dolor sit ametLorem ipsum dolor sit amet consectetur adipisicing elit. Voluptates, ullam..",
        descript:"Lorem ipsum dolor sit amet.",
        sku:"0005",
        tag: ["men"],
        url:"https://static.wixstatic.com/media/c837a6_fdb039110b784858933d038f14f78b1c~mv2.jpg/v1/fill/w_520,h_593,al_c,q_80,usm_0.66_1.00_0.01,enc_auto/c837a6_944cb31b5c7d4659b7a0c6612b4df573~mv2.jpg",
        url2:"https://static.wixstatic.com/media/c837a6_b595cfde79d140ffa9687f4ed9391f75~mv2.jpg/v1/fill/w_520,h_593,al_c,q_80,usm_0.66_1.00_0.01,enc_auto/c837a6_944cb31b5c7d4659b7a0c6612b4df573~mv2.jpg",
    },
    {
        id: 6,
        title: "I'm a product",
        price: 10.00,
        quantity: 1 ,
        info:"Lorem ipsum dolor sit amet.Lorem ipsum dolor sit amet.",
        descript:"Lorem ipsum dolor sit ametLorem ipsum dolor sit amet consectetur adipisicing elit. Voluptates, ullam..",
        sku:"0006",
        tag: ["home","men"],
        url: "https://static.wixstatic.com/media/c837a6_0ab9ff5bbc6f41a5b2dffae389cfb2b7~mv2.jpg/v1/fill/w_520,h_593,al_c,q_80,usm_0.66_1.00_0.01,enc_auto/c837a6_944cb31b5c7d4659b7a0c6612b4df573~mv2.jpg",
        
    },
    {
        id: 7,
        title: "I'm a product",
        price: 28.00,
        quantity: 1 ,
        info:"Lorem ipsum dolor sit amet.Lorem ipsum dolor sit ametLorem ipsum dolor sit amet consectetur adipisicing elit. Voluptates, ullam..",
        descript:"Lorem ipsum dolor sit amet.",
        sku:"0007",
        tag: ["home",],
        url: "https://static.wixstatic.com/media/c837a6_f8d49ec34c8a4f95890362cc7a53f89b~mv2.jpg/v1/fill/w_520,h_593,al_c,q_80,usm_0.66_1.00_0.01,enc_auto/c837a6_944cb31b5c7d4659b7a0c6612b4df573~mv2.jpg",
        
    },
    {
        id: 8,
        title: "I'm a product",
        price: 39.00,
        quantity: 1 ,
        info:"Lorem ipsum dolor sit amet.Lorem ipsum dolor sit amet.",
        descript:"Lorem ipsum dolor sit ametLorem ipsum dolor sit amet consectetur adipisicing elit. Voluptates, ullam..",
        sku:"0008",
        tag: ["home","women"],
        url: "https://static.wixstatic.com/media/c837a6_2308b08ad22c4e4aa919906536a1b5d1~mv2.jpg/v1/fill/w_520,h_593,al_c,q_80,usm_0.66_1.00_0.01,enc_auto/c837a6_944cb31b5c7d4659b7a0c6612b4df573~mv2.jpg",
        
    },
    {
        id: 9,
        title: "I'm a product",
        price: 37.00,
        quantity: 1 ,
        info:"Lorem ipsum dolor sit amet.Lorem ipsum dolor sit amet.",
        descript:"Lorem ipsum dolor sit amet.",
        sku:"0009",
        tag: ["men"],
        url:"https://static.wixstatic.com/media/c837a6_8645b4599db54d359dfe8bb70471e801~mv2.jpg/v1/fill/w_520,h_593,al_c,q_80,usm_0.66_1.00_0.01,enc_auto/c837a6_944cb31b5c7d4659b7a0c6612b4df573~mv2.jpg",
        url2:"https://static.wixstatic.com/media/c837a6_e7a5f8c65fb8477d8160755b217935a4~mv2.jpg/v1/fill/w_520,h_593,al_c,q_80,usm_0.66_1.00_0.01,enc_auto/c837a6_944cb31b5c7d4659b7a0c6612b4df573~mv2.jpg",
    
    },
    {   
        id: 10,
        title: "I'm a product",
        price: 9.00,
        quantity: 1 ,       
        info:"Lorem ipsum dolor sit amet.Lorem ipsum dolor sit amet.",
        descript:"Lorem ipsum dolor sit ametLorem ipsum dolor sit amet consectetur adipisicing elit. Voluptates, ullam..",
        sku:"0010",
        tag: ["home","men"],
        url: "https://static.wixstatic.com/media/c837a6_8ea5cc0a06664ef6a3c1cf64e1cb5a27~mv2.jpg/v1/fill/w_520,h_593,al_c,q_80,usm_0.66_1.00_0.01,enc_auto/c837a6_944cb31b5c7d4659b7a0c6612b4df573~mv2.jpg",
        
    },
    {
        id: 11,
        title: "I'm a product",
        price: 3.00,
        quantity: 1 ,        
        info:"Lorem ipsum dolor sit amet.Lorem ipsum dolor sit amet.",
        descript:"Lorem ipsum dolor sit amet.",
        sku:"0011",
        tag: ["home","women",],
        url: "https://static.wixstatic.com/media/c837a6_ce32dd298b274ba280efa267e075be21~mv2.jpg/v1/fill/w_520,h_593,al_c,q_80,usm_0.66_1.00_0.01,enc_auto/c837a6_944cb31b5c7d4659b7a0c6612b4df573~mv2.jpg",
    },
    {
        id: 12,
        title: "I'm a product",
        price: 28.00,
        quantity: 1 ,
        info:"Lorem ipsum dolor sit amet.Lorem ipsum dolor sit amet.",
        descript:"Lorem ipsum dolor sit amet.",
        sku:"0012",
        tag: ["women"],
        url: "https://static.wixstatic.com/media/c837a6_7d2a4773c9714fcd86ed78a0b9d1d086~mv2.jpg/v1/fill/w_520,h_593,al_c,q_80,usm_0.66_1.00_0.01,enc_auto/c837a6_944cb31b5c7d4659b7a0c6612b4df573~mv2.jpg",
        url2:"https://static.wixstatic.com/media/c837a6_34b176206c8842c6981aacc7d8277496~mv2.jpg/v1/fill/w_520,h_593,al_c,q_80,usm_0.66_1.00_0.01,enc_auto/c837a6_944cb31b5c7d4659b7a0c6612b4df573~mv2.jpg",

    },
    {
        id: 13,
        title: "I'm a product",
        price: 35.00,
        quantity: 1 ,
        info:"Lorem ipsum dolor sit amet.Lorem ipsum dolor sit amet.",
        descript:"Lorem ipsum dolor sit amet.",
        sku:"0013",
        tag: ["women"],
        url: "https://static.wixstatic.com/media/c837a6_8558a07ad8084a9cb9de58022d440527~mv2.jpg/v1/fill/w_520,h_593,al_c,q_80,usm_0.66_1.00_0.01,enc_auto/c837a6_944cb31b5c7d4659b7a0c6612b4df573~mv2.jpg",
        url2:"https://static.wixstatic.com/media/c837a6_b62932d93c7e403e8be83147da036347~mv2.jpg/v1/fill/w_520,h_593,al_c,q_80,usm_0.66_1.00_0.01,enc_auto/c837a6_944cb31b5c7d4659b7a0c6612b4df573~mv2.jpg",

    },
    {
        id: 14,
        title: "I'm a product",
        price: 80.00,
        quantity: 1 ,
        info:"Lorem ipsum dolor sit amet.Lorem ipsum dolor sit amet.",
        descript:"Lorem ipsum dolor sit amet.",
        sku:"0014",
        tag: ["women"],
        url:"https://static.wixstatic.com/media/c837a6_dff384ebdb954fd9a5903b028ce213c7~mv2.jpg/v1/fill/w_520,h_593,al_c,q_80,usm_0.66_1.00_0.01,enc_auto/c837a6_944cb31b5c7d4659b7a0c6612b4df573~mv2.jpg",
    },
    {
        id: 15,
        title: "I'm a product",
        price: 29.00,
        quantity: 1 ,
        info:"Lorem ipsum dolor sit amet.Lorem ipsum dolor sit amet.",
        descript:"Lorem ipsum dolor sit amet.",
        sku:"0015",
        tag: ["women"],
        url:"https://static.wixstatic.com/media/c837a6_a38998fd0bcd476d865747e88d09a971~mv2.jpg/v1/fill/w_520,h_593,al_c,q_80,usm_0.66_1.00_0.01,enc_auto/c837a6_944cb31b5c7d4659b7a0c6612b4df573~mv2.jpg",
        url2:"https://static.wixstatic.com/media/c837a6_e57f006d920347efa9e390762ecb7120~mv2.jpg/v1/fill/w_520,h_593,al_c,q_80,usm_0.66_1.00_0.01,enc_auto/c837a6_944cb31b5c7d4659b7a0c6612b4df573~mv2.jpg",
    },
    {
        id: 15,
        title: "I'm a product",
        price: 30.00,
        quantity: 1 ,
        info:"Lorem ipsum dolor sit amet.Lorem ipsum dolor sit amet.",
        descript:"Lorem ipsum dolor sit amet.",
        sku:"0016",
        tag:["women"],
        url:"https://static.wixstatic.com/media/c837a6_2308b08ad22c4e4aa919906536a1b5d1~mv2.jpg/v1/fill/w_520,h_593,al_c,q_80,usm_0.66_1.00_0.01,enc_auto/c837a6_944cb31b5c7d4659b7a0c6612b4df573~mv2.jpg",
    },

{
    id: 16,
    title: "I'm a product",
    price: 29.00,
    quantity: 1 ,
    info:"Lorem ipsum dolor sit amet.Lorem ipsum dolor sit amet.",
    descript:"Lorem ipsum dolor sit amet.",
    sku:"0017",
    tag: ["men"],
    url:"https://static.wixstatic.com/media/c837a6_9359210da13b4ad5b6c62faf5c369b6b~mv2.jpg/v1/fill/w_520,h_593,al_c,q_80,usm_0.66_1.00_0.01,enc_auto/c837a6_944cb31b5c7d4659b7a0c6612b4df573~mv2.jpg",
}

]
const cart = JSON.parse(localStorage.getItem("cart")) || [];

const addToCartFunction = (fragmentIdentifier) => {
    const productId = parseInt(fragmentIdentifier);
    const inputQuantity = document.getElementById("numbers");
    const product = productData.find((product) => product.id === productId);

    if (product) {
        product.quantity = parseInt(inputQuantity.value);

        const existingProduct = cart.find((elementAlreadyInCart) => elementAlreadyInCart.id === product.id);

        if (existingProduct) {
            existingProduct.quantity += product.quantity;
        } else {
            cart.push(product);
        }

        localStorage.setItem("cart", JSON.stringify(cart));
        console.log("Cart:", cart);
    }
};

const textaboutsale = document.getElementById("textaboutsale")
if(textaboutsale){
AOS.init();
}

const ThereIsOneforEveryone = document.getElementById("nerqevidiv");

if (ThereIsOneforEveryone) {
    window.onload = function() {
        setTimeout(function() {
            ThereIsOneforEveryone.style.display = "block";
            
        }, 1000); 
    };
    
}

const element = document.getElementById("getoff") || null;

if(element !==null){

window.addEventListener ('scroll', function()   {
const elementposition = element.getBoundingClientRect().top;
const screenposition = window.innerHeight;

if(elementposition<screenposition){
    slaqdzakh.style.animation = 'slide 2s linear';
    slaqaj.style.animation = 'slide-right 2s linear';
}
else{
    slaqdzakh.style.animation = 'paused'  
    slaqaj.style.animation = 'paused' 
 }
}
)
}


const fragmentIdentifier = window.location.hash.slice(1); 
console.log("kjkjbhkjkjhkjh", fragmentIdentifier)


const displayProduct = (filter) => {
    productData.filter((el) => el.tag.includes(filter)).forEach((item, index) => {
        
        const products = document.getElementById("products") || null;
        const product = document.createElement("div");
        const link = document.createElement("a");
        link.appendChild(product);
        link.setAttribute("href", `iamaproduct.html#${item.id}`);

        product.setAttribute("id", "productid" + index);
        product.className = "productclass";
    
        const divForImage = document.createElement("div");
        divForImage.setAttribute("id", "divforImage" + index);
    
        const imgElement = document.createElement("img");
        imgElement.setAttribute("id","img1");
        imgElement.src = item.url;

        imgElement.addEventListener("mouseenter", () => {
            imgElement.style.transition = 'transform 0.3s ease';
            imgElement.style.transform = 'scale(1.5)';
            imgElement.style.cursor = "zoom-in";
        });

        imgElement.addEventListener("mouseleave", () => {
           
            imgElement.style.transition = 'transform 0.5s ease';
            imgElement.style.transform = 'scale(1)';
            imgElement.style.cursor = "zoom-in";


        });

        if (item.url2) {
            imgElement.addEventListener("mouseenter", () => imgElement.src = item.url2);
            
            imgElement.addEventListener("mouseleave", () => imgElement.src = item.url);
        }      

       

        const boxfortitlesndprice = document.createElement("div")
        boxfortitlesndprice.setAttribute("id","boxfortitlesndprice")



        const title = document.createElement("div");
        title.setAttribute("id", "titleproduct");
        title.innerHTML = item.title;
        const price = document.createElement("div");
        price.setAttribute("id","priceproduct");
        price.innerHTML = item.price + "$";

        boxfortitlesndprice.appendChild(title);
        boxfortitlesndprice.appendChild(price);
        divForImage.appendChild(imgElement);
        product.appendChild(divForImage);
        product.appendChild(boxfortitlesndprice);
        products.appendChild(link);
        
    })
}

displayProduct(fragmentIdentifier === "" ? 'home' : fragmentIdentifier)

const iamproductimg = document.getElementById("img")

const displayOneProduct = (filter) => {
    const img = document.getElementById('img')
    img.style.background = `url(${productData[filter - 1].url})`;
    img.style.backgroundSize = 'cover'; 

    const sku = document.getElementById("sku");
    const price = document.getElementById("price");
    const info = document.getElementById("productdetail")
    const descript = document.getElementById("description")
    
    sku.innerHTML = `SKU: ${productData[filter - 1].sku}`
    price.innerHTML = `PRICE: ${productData[filter-1].price}$`
    info.innerHTML = `${productData[filter-1].info}`
    descript.innerHTML = `${productData[filter-1].descript}`

}


// productData[fragmentIdentifier - 1]

displayOneProduct(fragmentIdentifier)


const addToCart = document.getElementById("addtocart");
const cartSideBar = document.getElementById("cartSidebar");
const transparent = document.getElementById("transparent");
const numbers = document.getElementById("numbers");






addToCart.addEventListener("click", () => {
    addToCartFunction(fragmentIdentifier);

    const storage = JSON.parse(localStorage.getItem("cart"));
    cartSideBar.classList.remove("hidden");
    transparent.style.visibility = "visible";
    cartSideBar.style.right = "0";
    console.log(storage);

    const selectedProduct = document.getElementById("selectedProduct");
    selectedProduct.innerHTML = ""; // Очистить существующее содержимое
    
    const subtotalPrice = document.createElement("div");
    subtotalPrice.setAttribute("id","subtotalPrice");
    cartSideBar.appendChild(subtotalPrice);

    const subtotal = document.createElement("div");
    subtotal.setAttribute("id", "subtotal");
    subtotal.innerHTML = "SUBTOTAL";
    subtotalPrice.appendChild(subtotal);

   const subprice = document.createElement("div")
   subprice.setAttribute("id", "subprice")
   

    subtotalPrice.appendChild(subprice);

    storage.forEach((storageIndex) => {
        console.log('storageIndex: ', storageIndex);

        const scrollProduct = document.createElement("div");
        scrollProduct.setAttribute("class", "scrollproduct");

        const scrollOneProduct = document.createElement("div");
        scrollOneProduct.setAttribute("class", "scrollOneProduct");

        const selectImg = document.createElement("div");
        selectImg.setAttribute("class", "selectImg");
        selectImg.style.background = `url(${storageIndex.url})`;
        selectImg.style.backgroundSize = "cover";

        const selectPriceMrice = document.createElement("div");
        selectPriceMrice.setAttribute("class", "selectPriceMrice");

        const selectclose = document.createElement("div");
        selectclose.setAttribute("class", "selectclose");
        selectclose.innerHTML = "X";
        selectclose.addEventListener("click", () => {
            const productIndexToRemove = cart.findIndex(product => product.id === storageIndex.id);
        
            if (productIndexToRemove !== -1) {
                cart.splice(productIndexToRemove, 1);
                
                localStorage.setItem("cart", JSON.stringify(cart));
            }
        
            scrollProduct.remove();
        });
        
        const selectIamaproduct = document.createElement("div");
        selectIamaproduct.setAttribute("class", "selectIamaproduct");
        selectIamaproduct.innerHTML = "I'm a product";

        const selectPrice = document.createElement("div");
        selectPrice.setAttribute("class", "selectPrice");
        selectPrice.innerHTML = `${storageIndex.price}$`;

        const plusminus = document.createElement("div");
        plusminus.setAttribute("class", "plusminus");

        const plus = document.createElement("button");
        plus.setAttribute("class", "plus btnplusminus");
        plus.innerHTML = "+";
        plus.addEventListener("click", () => {
            const currentValue = parseInt(selectNumber.value);
            selectNumber.value = currentValue + 1;
            const plusproduct = cart.find(plusproduct => plusproduct.id === storageIndex.id);

if (plusproduct) {
    plusproduct.quantity += 1;

    const totalSum = cart.reduce((accumulator, item) => {
        return accumulator + calculateBazmapatkum(item);
    }, 0);

    subprice.innerHTML = `(${totalSum}$)`;

    localStorage.setItem("cart", JSON.stringify(cart));


    console.log("Updated Quantity:", plusproduct.quantity);
} else {
    console.log("Product not found in the cart");
}

        });

        const selectNumber = document.createElement("input");
        selectNumber.setAttribute("class", "selectNumber");
        selectNumber.value = storageIndex.quantity;

        
        const bazmapatkum = parseInt(selectNumber.value) * parseInt(selectPrice.innerHTML);
        
        const calculateBazmapatkum = (item) => {
            return parseInt(item.quantity) * parseInt(item.price);
        };

        const totalSum = cart.reduce((accumulator, item) => {
            return accumulator + calculateBazmapatkum(item);
        }, 0);

        subprice.innerHTML = `(${totalSum}$)`

        console.log("Total bazmapatkum:", totalSum);

                
        


        const minus = document.createElement("button");
        minus.setAttribute("class", "minus btnplusminus");
        minus.innerHTML = "-";
        minus.addEventListener("click", () => {
            const currentValue = parseInt(selectNumber.value);
            selectNumber.value = currentValue - 1;
      const minusproduct = cart.find(minusproduct => minusproduct.id === storageIndex.id);
    
    if (minusproduct) {
        // Increment the quantity value
        minusproduct.quantity -= 1;

        const totalSum = cart.reduce((accumulator, item) => {
            return accumulator + calculateBazmapatkum(item);
        }, 0);

        subprice.innerHTML = `(${totalSum}$)`;
    
        localStorage.setItem("cart", JSON.stringify(cart));
    
    
        } else {
        console.log("Product not found in the cart");
    }
        });

        selectedProduct.appendChild(scrollProduct);
        scrollProduct.appendChild(scrollOneProduct);
        scrollOneProduct.appendChild(selectImg);
        scrollOneProduct.appendChild(selectPriceMrice);
        scrollOneProduct.appendChild(selectclose);
        selectPriceMrice.appendChild(selectIamaproduct);
        selectPriceMrice.appendChild(selectPrice);
        selectPriceMrice.appendChild(plusminus);
        plusminus.appendChild(plus);
        plusminus.appendChild(selectNumber);
        plusminus.appendChild(minus);



       
    });
});



const btnViewCart = document.createElement("button");
btnViewCart.setAttribute("id","btnViewCart");
cartSideBar.appendChild(btnViewCart);
const ahref = document.createElement("a");
   ahref.setAttribute("href", "viewcart.html");
   ahref.setAttribute("id", "ahref")
   ahref.innerHTML = "VIEW CART";
   btnViewCart.appendChild(ahref);
 

const closecartSideBar = document.getElementById("closecartSidebar");

closecartSideBar.addEventListener("click", () => {
    
    transparent.style.visibility = "hidden";
    cartSideBar.style.right = "-500px";


});
// transparent.addEventListener("click", () => {
//     transparent.style.visibility = "hidden";
//     cartSideBar.style.right = "-500px";
// })




const mycartproduct = document.getElementById("mycartproduct");
const viewcartclose = document.getElementById("viewcartclose");
if(mycartproduct || viewcartclose){
    viewcartclose.addEventListener("click", () => {
        mycartproduct.style.display  = "none";
        
     })

}
